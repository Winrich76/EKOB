{% extends 'base-one_column.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
    <div class="boxH"><h3>Szczegóły remontu dla budynku: {{ renovation.building }}</h3></div>
    <div class="margin_box">

        <h3>Zakres robót:</h3>
            <div class="indent_box"><p>{{ renovation.description }}</p></div>



        <h3>Realizacja:</h3>
            <div class="indent_box">
                {% if execution %}
                    <p>Wykonawca: {{ execution.contractor }}</p>
                    <p>Inspector: {{ execution.surveyor }}</p>
                    <p>Data wprowadzenia na budowę: {{ execution.start }}</p>
                    <p>Data odbioru robót: {{ execution.termination }}</p>
                    <p>Uwagi: {{ execution.description }}</p>
                    {% if execution.termination_pdf %}
                        <p style="float: left">Protokół odbioru: </p>
                        <p ><a href="{{ execution.termination_pdf }}"><button class="icon">PDF</button></a></p>
                        <p style="clear:both"></p>

                    {% endif %}
                {% else %}<p>Nie wprowadzono danych.</p>
                {% endif %}
            </div>



        <h3>Umowy i zezwolenia:</h3>
            <div class="indent_box">
                {% if contracts %}
                    <table>
                        <tr>
                            <th>Nr umowy</th>
                            <th>Data</th>
                            <th>Rodzaj</th>
                            <th>Przedmiot umowy</th>
                            <th>Skan</th>
                        </tr>
                        {% for contract in contracts %}
                            <tr>
                                <td>{{ contract.number }}</td>
                                <td>{{ contract.date }}</td>
                                <td>{{ contract.get_kind_display }}</td>
                                <td>{{ contract.description }}</td>
                                <td>{% if contract.contract_pdf %}
                                        <a href="{{ contract.contract_pdf }}"><button class="icon">PDF</button></a>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                {% else %}<p>Nie wprowadzono danych.</p>
                {% endif %}
            </div>


        <h3>Zdjęcia:</h3>
            <div class="indent_box">
                <p>Ilość zdjęć w bazie: {{ pictures }}</p>
                <table>
                    <tr>
                        <td class="filter">Dodaj zdjęcia</td>
                        <td class="filter"><label class="container"><input type="checkbox" id="check_add_picture" >  <span class="checkmark"></span></label></td>
                    </tr>
                </table>



                <div id="add_picture" class="invisible">
                   <form action="/renovations/addpicture" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{ form.non_field_errors }}
                        {% for hidden_field in form.hidden_fields %}
                            {{ hidden_field.errors }}
                            {{ hidden_field }}
                        {% endfor %}

                      <table>
                            {% for field in form.visible_fields %}
                              <tr>
                                  <th class="form_up">{{ field.label_tag }}</th>
                                    <td class="maxWidth">
                                        {{ field.errors }}
                                        {% render_field field  %}
                                    </td>
                              </tr>
                            {% endfor %}
                      </table>
                    <button type="submit" >Wyślij</button>
                    </form>

                </div>
            </div>



        <div style="clear:both"></div>

            <a href="contracts/{{ renovation.id}}"> <button type="submit" >Dodaj umowę</button></a>
            {% if not execution %}
                    <a href="execution/{{ renovation.id}}"><button type="submit" >Dodaj realizację</button></a>
            {% endif %}
            <a href="/renovations/delete/{{ renovation.id }}"><button type="submit" class="red" >kasuj remont</button></a>
        <div style="clear:both"></div>
    </div>


{% endblock %}
{% block content_js_script %}
    <script src={% static "js/one_renovation.js" %} ></script>
{% endblock %}